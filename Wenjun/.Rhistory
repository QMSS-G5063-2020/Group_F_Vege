xanchor='right', yanchor='auto', xshift=0, yshift=0,align="left",
font=list(size=10, color="grey")))
plot_ly(top20Ingredient,
x = ~cnt, y = ~ingredient,
type = "bar", orientation = "h",
marker = list(
color = "#41ab5d",
line = list(width = 0)
)) %>%
layout(title = "Popular Ingredients in Vegetarian Recipes",
xaxis = list(title = "# of recipes with the ingredient"),
yaxis = list(title = ""),
annotations = list(x = 0.2, y = -0.11,
text = "Note: Ingredients appear in less than 10 recipes or \nmore than 100 recipes are excluded.",
showarrow = F, xref='paper', yref='paper',
xanchor='right', yanchor='auto', xshift=0, yshift=0,align="left",
font=list(size=10, color="grey")))
plot_ly(top20Ingredient,
x = ~cnt, y = ~ingredient,
type = "bar", orientation = "h",
marker = list(
color = "#41ab5d",
line = list(width = 0)
)) %>%
layout(title = "Popular Ingredients in Vegetarian Recipes",
xaxis = list(title = "# of recipes with the ingredient"),
yaxis = list(title = ""),
annotations = list(x = 0.2, y = -0.12,
text = "Note: Ingredients appear in less than 10 recipes or \nmore than 100 recipes are excluded.",
showarrow = F, xref='paper', yref='paper',
xanchor='right', yanchor='auto', xshift=0, yshift=0,align="left",
font=list(size=10, color="grey")))
plot_ly(top20Ingredient,
x = ~cnt, y = ~ingredient,
type = "bar", orientation = "h",
marker = list(
color = "#41ab5d",
line = list(width = 0)
)) %>%
layout(title = "Popular Ingredients in Vegetarian Recipes",
xaxis = list(title = "# of recipes with the ingredient"),
yaxis = list(title = ""),
annotations = list(x = 0.2, y = -0.115,
text = "Note: Ingredients appear in less than 10 recipes or \nmore than 100 recipes are excluded.",
showarrow = F, xref='paper', yref='paper',
xanchor='right', yanchor='auto', xshift=0, yshift=0,align="left",
font=list(size=10, color="grey")))
plot_ly(top20Ingredient,
x = ~cnt, y = ~ingredient,
type = "bar", orientation = "h",
marker = list(
color = "#41ab5d",
line = list(width = 0)
)) %>%
layout(title = "Popular Ingredients in Vegetarian Recipes",
xaxis = list(title = "# of recipes with the ingredient"),
yaxis = list(title = ""),
annotations = list(x = 0.21, y = -0.115,
text = "Note: Ingredients appear in less than 10 recipes or \nmore than 100 recipes are excluded.",
showarrow = F, xref='paper', yref='paper',
xanchor='right', yanchor='auto', xshift=0, yshift=0,align="left",
font=list(size=10, color="grey")))
plot_ly(top20Ingredient,
x = ~cnt, y = ~ingredient,
type = "bar", orientation = "h",
hovertemplate = paste('%{y}', '<br>Number of Recipes: %{x}<br>'),
marker = list(
color = "#41ab5d",
line = list(width = 0)
)) %>%
layout(title = "Popular Ingredients in Vegetarian Recipes",
xaxis = list(title = "# of recipes with the ingredient"),
yaxis = list(title = ""),
annotations = list(x = 0.21, y = -0.115,
text = "Note: Ingredients appear in less than 10 recipes or \nmore than 100 recipes are excluded.",
showarrow = F, xref='paper', yref='paper',
xanchor='right', yanchor='auto', xshift=0, yshift=0,align="left",
font=list(size=10, color="grey")))
plot_ly(top20Ingredient,
x = ~cnt, y = ~ingredient,
type = "bar", orientation = "h",
hovertemplate = paste('%{y}', '<br>%{x} recipes have it<br>'),
marker = list(
color = "#41ab5d",
line = list(width = 0)
)) %>%
layout(title = "Popular Ingredients in Vegetarian Recipes",
xaxis = list(title = "# of recipes with the ingredient"),
yaxis = list(title = ""),
annotations = list(x = 0.21, y = -0.115,
text = "Note: Ingredients appear in less than 10 recipes or \nmore than 100 recipes are excluded.",
showarrow = F, xref='paper', yref='paper',
xanchor='right', yanchor='auto', xshift=0, yshift=0,align="left",
font=list(size=10, color="grey")))
plot_ly(top20Ingredient,
x = ~cnt, y = ~ingredient,
type = "bar", orientation = "h",
hovertemplate = paste('%{y}', '<br>%{x} recipes<br>'),
marker = list(
color = "#41ab5d",
line = list(width = 0)
)) %>%
layout(title = "Popular Ingredients in Vegetarian Recipes",
xaxis = list(title = "# of recipes with the ingredient"),
yaxis = list(title = ""),
annotations = list(x = 0.21, y = -0.115,
text = "Note: Ingredients appear in less than 10 recipes or \nmore than 100 recipes are excluded.",
showarrow = F, xref='paper', yref='paper',
xanchor='right', yanchor='auto', xshift=0, yshift=0,align="left",
font=list(size=10, color="grey")))
plot_ly(top20Ingredient,
x = ~cnt, y = ~ingredient, text = ~cnt
type = "bar", orientation = "h",
plot_ly(top20Ingredient,
x = ~cnt, y = ~ingredient, text = ~cnt,
type = "bar", orientation = "h",
hovertemplate = paste('%{y}', '<br>%{x} recipes<br>'),
texttemplate = '%{y:.2s}',
marker = list(
color = "#41ab5d",
line = list(width = 0)
)) %>%
layout(title = "Popular Ingredients in Vegetarian Recipes",
xaxis = list(title = "# of recipes with the ingredient"),
yaxis = list(title = ""),
annotations = list(x = 0.21, y = -0.115,
text = "Note: Ingredients appear in less than 10 recipes or \nmore than 100 recipes are excluded.",
showarrow = F, xref='paper', yref='paper',
xanchor='right', yanchor='auto', xshift=0, yshift=0,align="left",
font=list(size=10, color="grey")))
plot_ly(top20Ingredient,
x = ~cnt, y = ~ingredient, text = ~cnt,
type = "bar", orientation = "h",
hovertemplate = paste('%{y}', '<br>%{x} recipes<br>'),
texttemplate = '%{y:.2s}', textposition = 'outside',
marker = list(
color = "#41ab5d",
line = list(width = 0)
)) %>%
layout(title = "Popular Ingredients in Vegetarian Recipes",
xaxis = list(title = "# of recipes with the ingredient"),
yaxis = list(title = ""),
annotations = list(x = 0.21, y = -0.115,
text = "Note: Ingredients appear in less than 10 recipes or \nmore than 100 recipes are excluded.",
showarrow = F, xref='paper', yref='paper',
xanchor='right', yanchor='auto', xshift=0, yshift=0,align="left",
font=list(size=10, color="grey")))
plot_ly(top20Ingredient,
x = ~cnt, y = ~ingredient, text = ~cnt,
type = "bar", orientation = "h",
hovertemplate = paste('%{y}', '<br>%{x} recipes<br>'),
texttemplate = '%{x}', textposition = 'outside',
marker = list(
color = "#41ab5d",
line = list(width = 0)
)) %>%
layout(title = "Popular Ingredients in Vegetarian Recipes",
xaxis = list(title = "# of recipes with the ingredient"),
yaxis = list(title = ""),
annotations = list(x = 0.21, y = -0.115,
text = "Note: Ingredients appear in less than 10 recipes or \nmore than 100 recipes are excluded.",
showarrow = F, xref='paper', yref='paper',
xanchor='right', yanchor='auto', xshift=0, yshift=0,align="left",
font=list(size=10, color="grey")))
plot_ly(top20Ingredient,
x = ~cnt, y = ~ingredient, name = "",
type = "bar", orientation = "h",
hovertemplate = paste('%{y}', '<br>%{x} recipes<br>'),
marker = list(
color = "#41ab5d",
line = list(width = 0)
)) %>%
layout(title = "Popular Ingredients in Vegetarian Recipes",
xaxis = list(title = "# of recipes with the ingredient"),
yaxis = list(title = ""),
annotations = list(x = 0.21, y = -0.115,
text = "Note: Ingredients appear in less than 10 recipes or \nmore than 100 recipes are excluded.",
showarrow = F, xref='paper', yref='paper',
xanchor='right', yanchor='auto', xshift=0, yshift=0,align="left",
font=list(size=10, color="grey")))
library(knitr)
opts_chunk$set(fig.path="figures\\",
cache.path="cache\\",
cache=FALSE,
echo=TRUE,
message=FALSE,
warning=FALSE)
library(dplyr)
library(tidyverse)
library(httr)
library(jsonlite)
#library(tm)
library(wordcloud)
library(plotly)
library(ggplot2)
library(ggthemes)
load("data//combined_recipe_id.RData")
load("data//combined_recipe_id.RData")
load("combined_recipe_id.RData")
View(combined)
load("ingredientDfCleaned.RData")
load("combined_recipe_id_ingredient.RData")
View(combined)
recipe_title <- load("combined_recipe_id.RData")
load("combined_recipe_id_ingredient.RData")
View(combined)
allTitle <- paste(combined$recipe_name, collapse = " ")
titleList <- strsplit(allTitle, " ")
View(titleList)
titleDf <- data.frame(titleList, stringsAsFactors = FALSE)
View(titleDf)
allTitle <- paste(combined$recipe_name, collapse = " ")
titleList <- strsplit(allTitle, " ")
titleDf <- data.frame(titleList, stringsAsFactors = FALSE)
names(titleDf) <- "text"
titleDf <- titleDf %>%
mutate(doc_id = n())
View(titleDf)
library(tm)
library(qdap)
allTitle <- paste(combined$recipe_name, collapse = " ") %>%
removeNumbers()
allTitle
allTitle <- paste(combined$recipe_name, collapse = " ") %>%
removeNumbers() %>%
removePunctuation() %>%
tolower() %>%
removeWords(c(stopwords("english"), myStopWords)) %>%
stripWhitespace()
myStopWords <- c("quick")
allTitle <- paste(combined$recipe_name, collapse = " ") %>%
removeNumbers() %>%
removePunctuation() %>%
tolower() %>%
removeWords(c(stopwords("english"), myStopWords)) %>%
stripWhitespace()
allTitle
titleList <- strsplit(allTitle, " ")
titleDf <- data.frame(titleList, stringsAsFactors = FALSE)
names(titleDf) <- "word"
titleDf <- titleDf %>%
group_by(word) %>%
summarise(cnt = count(word))
View(titleDf)
titleDf <- titleDf %>%
group_by(word) %>%
tally()
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup() %>%
top_n(30, desc(n))
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup() %>%
top_n(30, n)
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup() %>%
top_n(30)
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup() %>%
top_n(10, n)
View(titleDf)
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup() %>%
top_n(10, -n)
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup() %>%
top_n(n=10, wt=n)
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup() %>%
top_n(n=10, wt=-n)
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup() %>%
arrange(desc(n)) %>%
head(20)
View(titleDf)
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup() %>%
arrange(n) %>%
head(20)
View(titleDf)
class(titleDf$n)
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup() %>%
arrange(desc(n)) %>%
head(10)
View(titleDf)
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
arrange(desc(n)) %>%
head(10)
View(titleDf)
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
arrange(n)# %>%
View(titleDf)
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup()
View(titleDf)
titleList <- strsplit(allTitle, " ")
titleDf <- data.frame(titleList, stringsAsFactors = FALSE)
names(titleDf) <- "word"
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup()
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup() %>%
top_n(10, n)
View(titleDf)
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup() %>%
top_n(10, wt=n)
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup() %>%
top_n(10, wt=desc(n))
titleList <- strsplit(allTitle, " ")
titleDf <- data.frame(titleList, stringsAsFactors = FALSE)
names(titleDf) <- "word"
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup()
titleList <- strsplit(allTitle, " ")
titleDf <- data.frame(titleList, stringsAsFactors = FALSE)
names(titleDf) <- "word"
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup()
View(titleDf)
save(titleDf, "titleWordCount.RData")
save(titleDf, file="titleWordCount.RData")
load("titleWordCount.RData")
wordcloud(titleDf$word, titleDf$n, scale = c(1.5,.25), min.freq = 0,
max.words = 100,
colors = brewer.pal(max(7, ncol(wordcloudDf$cnt)),"Greens"))
wordcloud(titleDf$word, titleDf$n, scale = c(1.5,.25), min.freq = 0,
max.words = 100,
colors = brewer.pal(max(7, ncol(titleDf$n)),"Greens"))
set.seed(1997)
wordcloud(titleDf$word, titleDf$n, scale = c(1.5,.25), min.freq = 0,
max.words = 100,
colors = brewer.pal(max(7, ncol(titleDf$n)),"Greens"))
library(knitr)
opts_chunk$set(fig.path="figures\\",
cache.path="cache\\",
cache=FALSE,
echo=TRUE,
message=FALSE,
warning=FALSE,
fig.align = 'center')
library(dplyr)
library(tidyverse)
library(wordcloud)
library(ggplot2)
library(ggthemes)
load("data//titleWordCount.RData")
wordcloudDf <- titleDf %>%
filter(n > 10)
set.seed(1997)
wordcloud(titleDf$word, titleDf$n, scale = c(1.5,.25), min.freq = 0,
max.words = 100,
colors = brewer.pal(max(7, ncol(titleDf$n)),"Greens"))
load("data//titleWordCount.RData")
wordcloudDf <- titleDf %>%
filter(n > 20)
set.seed(1997)
wordcloud(titleDf$word, titleDf$n, scale = c(1.5,.25), min.freq = 0,
max.words = 100,
colors = brewer.pal(max(7, ncol(titleDf$n)),"Greens"))
load("data//titleWordCount.RData")
titleDf <- titleDf %>%
filter(n > 30)
set.seed(1997)
wordcloud(titleDf$word, titleDf$n, scale = c(1.5,.25), min.freq = 0,
max.words = 100,
colors = brewer.pal(max(7, ncol(titleDf$n)),"Greens"))
load("data//titleWordCount.RData")
titleDf <- titleDf %>%
filter(n > 20)
set.seed(1997)
wordcloud(titleDf$word, titleDf$n, scale = c(1.5,.25), min.freq = 0,
max.words = 100,
colors = brewer.pal(max(7, ncol(titleDf$n)),"Greens"))
# frequency word in recipe title
library(tm)
load("combined_recipe_id_ingredient.RData")
myStopWords <- c("quick", "best", "black")
allTitle <- paste(combined$recipe_name, collapse = " ") %>%
removeNumbers() %>%
removePunctuation() %>%
tolower() %>%
removeWords(c(stopwords("english"), myStopWords)) %>%
stripWhitespace()
titleList <- strsplit(allTitle, " ")
titleDf <- data.frame(titleList, stringsAsFactors = FALSE)
names(titleDf) <- "word"
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup()
save(titleDf, file="titleWordCount.RData")
load("data//titleWordCount.RData")
titleDf <- titleDf %>%
filter(n > 20)
set.seed(1997)
wordcloud(titleDf$word, titleDf$n, scale = c(1.5,.25), min.freq = 0,
max.words = 100,
colors = brewer.pal(max(7, ncol(titleDf$n)),"Greens"))
# frequency word in recipe title
library(tm)
load("combined_recipe_id_ingredient.RData")
myStopWords <- c("quick", "best", "black", "homemade")
allTitle <- paste(combined$recipe_name, collapse = " ") %>%
removeNumbers() %>%
removePunctuation() %>%
tolower() %>%
removeWords(c(stopwords("english"), myStopWords)) %>%
stripWhitespace()
titleList <- strsplit(allTitle, " ")
titleDf <- data.frame(titleList, stringsAsFactors = FALSE)
names(titleDf) <- "word"
titleDf <- titleDf %>%
group_by(word) %>%
tally() %>%
ungroup()
save(titleDf, file="titleWordCount.RData")
load("data//titleWordCount.RData")
titleDf <- titleDf %>%
filter(n > 20)
set.seed(1997)
wordcloud(titleDf$word, titleDf$n, scale = c(1.5,.25), min.freq = 0,
max.words = 100,
colors = brewer.pal(max(7, ncol(titleDf$n)),"Greens"))
rmarkdown::render_site()
library(knitr)
opts_chunk$set(fig.path="figures\\",
cache.path="cache\\",
cache=FALSE,
echo=TRUE,
message=FALSE,
warning=FALSE)
library(dplyr)
library(tidyverse)
library(httr)
library(jsonlite)
#library(tm)
library(wordcloud)
library(plotly)
library(ggplot2)
library(ggthemes)
library(ggplot2)
library(ggthemes)
top20Ingredient <- ingredientDfCleaned %>%
filter(cnt > 10 & cnt < 100) %>%
top_n(n = 20, wt = cnt) %>%
mutate(ingredient = fct_reorder(ingredient, cnt))
ggplot(top20Ingredient) +
geom_bar(aes(x = ingredient, y = cnt),
stat = "identity", position = "identity", fill = "#639a67", alpha = 0.8) +
geom_text(aes(x = ingredient, y = cnt, label = cnt),
color = "white", fontface = "bold", size = 3, hjust = 1.5) +
coord_flip() +
labs(
title = "Need a Little Greenness",
subtitle = "Number of times each ingredient appears in the top 1000 recipes.",
caption = "
Note: Ingredients appear in less than 10 recipes or more than 300 recipes are excluded.
Data Source: https://spoonacular.com/food-api/
"
) +
theme_hc() +
theme(
panel.grid.major.y = element_blank(),
axis.ticks = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_text(color = "black", size = 10),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
legend.position = "none",
plot.caption=element_text(size=7, color="grey40"),
plot.subtitle = element_text(size=10, color="grey60", face="italic"),
)
